<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solar System Simulation</title>
<style>
  html, body { margin: 0; overflow: hidden; background: #000; color: #fff; font-family: sans-serif;}
  #ui { position: absolute; top: 10px; left: 10px; z-index: 10; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 8px;}
  label { display:block; margin: 5px 0; }
</style>
</head>
<body>
<div id="ui">
  <label>Speed: <input type="range" id="speedSlider" min="0.1" max="5" value="1" step="0.1"></label>
  <label>Distance Compression: <input type="range" id="distSlider" min="0.1" max="1" value="0.5" step="0.01"></label>
  <label>Trail Length: <input type="range" id="trailSlider" min="10" max="200" value="50" step="1"></label>
</div>

<script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.min.js"></script>
<script>
let planets = [
  {name:"Mercury", color:"#a9a9a9", a:57.9, e:0.205, radius:4, angle:0, period:88},
  {name:"Venus", color:"#f5deb3", a:108.2, e:0.007, radius:7, angle:0, period:224.7},
  {name:"Earth", color:"#1e90ff", a:149.6, e:0.017, radius:8, angle:0, period:365.2},
  {name:"Mars", color:"#ff4500", a:227.9, e:0.094, radius:6, angle:0, period:687},
  {name:"Jupiter", color:"#ffa500", a:778.6, e:0.049, radius:14, angle:0, period:4331},
  {name:"Saturn", color:"#f0e68c", a:1433.5, e:0.056, radius:12, angle:0, period:10747},
  {name:"Uranus", color:"#7fffd4", a:2872.5, e:0.046, radius:10, angle:0, period:30589},
  {name:"Neptune", color:"#4169e1", a:4495.1, e:0.010, radius:10, angle:0, period:59800}
];

let trails = [];
let speedSlider, distSlider, trailSlider;
let scaleFactor, maxOrbit;
function setup(){
  createCanvas(windowWidth, windowHeight);
  speedSlider = select('#speedSlider');
  distSlider = select('#distSlider');
  trailSlider = select('#trailSlider');
  maxOrbit = Math.max(...planets.map(p=>p.a));
  scaleFactor = min(width, height)/2 / maxOrbit * distSlider.value();
  for(let p of planets){ trails[p.name] = [];}
}

function windowResized(){ resizeCanvas(windowWidth, windowHeight); scaleFactor = min(width, height)/2 / maxOrbit * distSlider.value(); }

function draw(){
  background(0, 20); // faint fading for trails
  translate(width/2, height/2*0.9);
  let speed = speedSlider.value();
  scaleFactor = min(width, height)/2 / maxOrbit * distSlider.value();

  // Draw Sun
  noStroke();
  fill(255, 204, 0);
  ellipse(0,0,30,30);
  drawingContext.shadowBlur = 30;
  drawingContext.shadowColor = "#ff0";

  rotateXFrame(PI/6); // angled perspective

  for(let p of planets){
    let t = frameCount*speed*0.01*(365/p.period);
    p.angle = t;
    let r = p.a*(1-p.e*p.e)/(1+p.e*cos(p.angle));
    let x = r*cos(p.angle)*scaleFactor;
    let y = r*sin(p.angle)*scaleFactor*0.6; // compress vertical for angled view

    // Update trails
    trails[p.name].push([x,y]);
    if(trails[p.name].length>trailSlider.value()) trails[p.name].shift();

    // Draw orbit path faintly
    noFill();
    stroke(255,30);
    ellipse(0,0,p.a*2*scaleFactor, p.a*2*scaleFactor*0.6);

    // Draw trails
    noFill();
    beginShape();
    for(let i=0;i<trails[p.name].length;i++){
      let alpha = map(i,0,trails[p.name].length,0,255);
      stroke(p.color + hex(int(alpha),2));
      vertex(trails[p.name][i][0], trails[p.name][i][1]);
    }
    endShape();

    // Draw planet
    noStroke();
    fill(p.color);
    ellipse(x,y,p.radius*2,p.radius*2);

    // Draw label
    fill(255);
    textSize(12);
    textAlign(CENTER);
    text(p.name, x, y - p.radius*2);
  }
}

// Simple pseudo rotate for angled effect
function rotateXFrame(angle){
  rotate(angle*0.1); // subtle rotation to add 3D-ish feeling
}
</script>
</body>
</html>
